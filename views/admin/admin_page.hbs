  {{>admin_sidebar}}


<div class="" style="margin-left:8rem">
  <section class="p-3  pb-5 dash" style="margin-left:2rem">

<div class="container-fluid pt-4 px-4">
  <div class="row g-4 dashCards">
    <div class="col-sm-3">
      <div
        class="bg-light rounded d-flex align-items-center justify-content-between p-4"
      >
        <i class="fa fa-line-chart fa-3x text-primary"></i>
        <div class="ms-3">
          <p class="mb-2">Total Sales</p>
          <h6 class="mb-0">â‚¹{{amount}}</h6>
        </div>
      </div>
    </div>
     <div class="col-sm-3 ">
      <div
        class="bg-light rounded d-flex align-items-center justify-content-between p-4"
      >
        <i class="fa fa-dollar fa-3x text-primary"></i>
        <div class="ms-3">
          <p class="mb-2">Total no. of sales</p>
          <h6 class="mb-0">{{Sales}}</h6>
        </div>
      </div>
    </div>
     <div class="col-sm-3 ">
      <div
        class="bg-light rounded d-flex align-items-center justify-content-between p-4"
      >
        <i class="fa fa-users fa-3x text-primary"></i>
        <div class="ms-3">
          <p class="mb-2">Total users</p>
          <h6 class="mb-0">{{users}}</h6>
        </div>
      </div>
    </div>
    
  </div>
</div>
<!-- Sale & Revenue End -->

<!-- Sales Chart Start -->
<div class="row p-5 h-100" style="  width: 77rem; height: 35rem;">
    <div class="col-sm-6">
      <div class="bg-light text-center rounded p-4">
        <div class="d-flex align-items-center justify-content-between mb-4">
          <h6 class="mb-0">Daily Sales</h6>

        </div>
       <canvas id="day" class="m-auto" style="width:60rem;max-width:540px;height:25rem;"></canvas> 
      </div>
    </div>
 

<!-- Sales Chart End -->

 <div class="bg-light rounded h-100 p-4 col-sm-6 " style="
   
">
                            <h6 class="mb-4">Monthly sales</h6>
                           <canvas id="month" class="m-auto" style="width:60rem;max-width:540px;height:25rem;"></canvas> 
                        </div>




                        
                    {{!-- <div class="col-sm-12 col-xl-6">
                        <div class="bg-light rounded h-100 p-4">
                            <h6 class="mb-4">Multiple Line Chart</h6>
                            <canvas id="salse-revenue"></canvas>
                        </div>
                    </div> --}}
                </div>           
      </div>
  </div>
      </div>

</div>

<!-- Recent Sales Start -->
{{!-- <div class="container-fluid pt-4 px-4">
  <div
    class="bg-light rounded p-4"
    style="
    width: 29rem;
    display: inline-block;
    left: 18rem;
    position: absolute;
" --}}
  >
    {{!-- <div class="d-flex align-items-center justify-content-between mb-4">
      <h6 class="mb-0">New users</h6>

    </div> --}}
    {{!-- <div class="table-responsive">
      <table class="table  pl-3">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Email</th>

          </tr>
        </thead>
        <tbody>
          {{#each users}}
            <tr>
              <th scope="row">{{this.name}}</th>
              <td>{{this.email}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
    <div class="table-responsive"  style="
    position: absolute;
    width: 46rem;
    top: -0.4rem;
    left: 30rem;
    overflow-x: hidden;
    overflow-y:hidden;
    height: 36rem;
    border-radius: 6px;
    background-color: #f7f7f7;
    padding: 1rem;
">   <div class="d-flex align-items-center justify-content-between mb-4" style="background: white;">
      <h6 class="mb-0 pt-3">Latest transactions</h6>

    </div>
       <table class="table table-bordered" id="salesTable">
                <thead>
                    <tr>
                    <th>Date</th>
                    
                    <th>amount</th>
                    <th>Options</th>
                    </tr>
                </thead>
                <tbody>
               
                    {{#each orders}}

                    <tr>
                        <td>{{this.date}}</td>
                        
                        <td>
                         {{this.totalAmount}}
 
                        </td>
                        <td>
                            <p>
  <button class="betaButton" data-toggle="collapse" data-target="#1{{this._id}}" type="button" onclick="userDetails('{{this.userId}}','{{this._id}}')" aria-expanded="false" aria-controls="multiCollapseExample1" style="
    width: 8rem;
"> User details</button>
 


  
</p>
<div class="row">
  <div class="col">
    <div class="collapse multi-collapse" id="1{{this._id}}">
      <div class="card card-body">
        <h6>Name:</h6><span id="name{{this._id}}"></span><br>
        <h6>Email:</h6><span id="email{{this._id}}"></span>
        
      </div>
    </div>
  </div>
  <div class="col">
    <div class="collapse multi-collapse" id="2{{this._id}}">
      <div class="card card-body">
        

      </div>
    </div>
  </div>
</div>
                        </td>
                    </tr>
                    {{/each}}
                
                </tbody>
            </table>
    </div>
  </div>
</div>
<h4 style="
    position: absolute;
    left: 20rem;
    top: 70rem;
">Records</h4> --}}
{{!-- <table class="table" style="
    position: absolute;
    left: 20rem;
    top: 74rem;
        width: 44rem;
">
 
  <tr>
    <th>Most Sold</th>
  </tr>
  <tr><th>Name</th>
  <th>count</th>
  <th>price</th></tr>
  <tr>
    <td id="ms"></td>
    <td id="count"></td>
    <td id="price"></td>
  </tr>
</table> --}}
</section>



  





{{!-- <div class="graph w-100  d-flex justify-content-center" style="height: 80vh;">
    <h3 style="margin-left:auto ;">Weekly Report</h3>
<canvas id="week" class="m-auto" style="width:60rem;max-width:600px;height:25rem;"></canvas> 

</div> --}}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



  
 <script> 
  $(document).ready(function() { 
   $.ajax({ 
     url: `/admin/stats/week`, 
     method: "GET", 
     success: function(response) { 
       console.log(response); 
       var xValues =response.date; 
       var yValues = response.totalAmount; 
       new Chart("week", { 
         type: "line", 
         data: { 
           labels: xValues, 
           datasets: [{ 
             fill: false, 
             lineTension: 0, 
             label: 'Sales', 
             backgroundColor: 'rgb(255, 99, 132)', 
             borderColor: 'rgb(255, 99, 132)', 
             data: yValues 
           }] 
         }, 
         options: { 
           legend: { 
             display: false 
           }, 
           scales: { 
             yAxes: [{ 
               ticks: { 
                 min: 6, 
                 max: 16 
               } 
             }], 
           } 
         } 
       }); 
     }, 
     error: function(err) { 
       console.log(err); 
     } 
   }) 
 }) 
 </script>


{{!-- 
 <div class="graph w-100  d-flex justify-content-center" style="height: 100vh; margin-top: 25rem;">
    <h3 class="text-cente pt-3" style="margin-left:auto;">Monthly Report</h3>
<canvas id="month" class="m-auto" style="width:60rem;max-width:600px;height:25rem;"></canvas> 

</div> --}}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



  
 <script> 
  $(document).ready(function() { 
   $.ajax({ 
     url: `/admin/stats/month`, 
     method: "GET", 
     success: function(response) { 
       console.log(response); 
       var xValues =response.date; 
       var yValues = response.totalAmount; 
       new Chart("month", { 
         type: "bar", 
         data: {  
           labels: xValues, 
           datasets: [{ 
             fill: false, 
             lineTension: 0, 
             label: 'Sales', 
             backgroundColor: 'rgb(255, 99, 132)', 
             borderColor: 'rgb(255, 99, 132)', 
             data: yValues 
           }] 
         }, 
         options: { 
           legend: { 
             display: false 
           }, 
           scales: { 
             yAxes: [{ 
               ticks: { 
                 min: 6, 
                 max: 16 
               } 
             }], 
           } 
         } 
       }); 
     }, 
     error: function(err) { 
       console.log(err); 
     } 
   }) 
 }) 
 </script>



{{!--  
 <div class="graph w-100  d-flex justify-content-center" style="height: 100vh; margin-top: 25rem;">
    <h3 class="text-center" style="margin-left:auto ;">Daily Report</h3>
<canvas id="day" class="m-auto" style="width:60rem;max-width:600px;height:25rem;"></canvas> 

</div> --}}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



  
 <script> 
  $(document).ready(function() { 
   $.ajax({ 
     url: `/admin/stats/day`, 
     method: "GET", 
     success: function(response) { 
       console.log(response); 
       var xValues =response.date; 
       var yValues = response.totalAmount; 
       new Chart("day", { 
         type: "line", 
         data: { 
           labels: xValues, 
           datasets: [{ 
             fill: false, 
             lineTension: 0, 
             label: 'Sales', 
             backgroundColor: 'rgb(255, 99, 132)', 
             borderColor: 'rgb(255, 99, 132)', 
             data: yValues 
           }] 
         }, 
         options: { 
           legend: { 
             display: false 
           }, 
           scales: { 
             yAxes: [{ 
               ticks: { 
                 min: 6, 
                 max: 16 
               } 
             }], 
           } 
         } 
       }); 
     }, 
     error: function(err) { 
       console.log(err); 
     } 
   }) 
 }) 
 </script>